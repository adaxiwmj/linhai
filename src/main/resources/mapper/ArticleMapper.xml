<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tencent.wxcloudrun.dao.ArticleMapper">

    <resultMap id="articleMapper" type="com.tencent.wxcloudrun.model.Article">
        <id property="articleId" column="articleId"/>
        <result property="title" column="title"/>
        <result property="articleType" column="article_type"/>
        <result property="merchantCategory" column="merchant_category"/>
        <result property="content" column="content"/>
        <result property="price" column="price"/>
        <result property="isDeliveryCovered" column="is_delivery_covered"/>
        <result property="deliveryMethod" column="delivery_method"/>
        <result property="location" column="location"/>
        <result property="isNeedHelp" column="is_need_help"/>
        <result property="createTimestamp" column="create_timestamp" javaType="java.math.BigDecimal"/>
        <result property="updateTimestamp" column="update_timestamp" javaType="java.math.BigDecimal"/>
        <result property="authorName" column="author_name"/>
        <result property="authorId" column="author_id"/>
        <result property="latitude" column="latitude"/>
        <result property="longitude" column="longitude"/>
        <result property="likeCount" column="like_count"/>
        <result property="viewCount" column="view_count"/>
        <result property="colCount" column="col_count"/>
        <result property="isStickTop" column="is_stick_top"/>
        <collection property="images" column="images" ofType="java.lang.String" javaType="java.util.ArrayList"/>
    </resultMap>

    <select id="searchArticleByTitle" resultType="com.tencent.wxcloudrun.model.Article" parameterType="java.lang.String">
        SELECT * FROM Articles
        <where>
            <if test="title != null and title != ''">
                title like concat('%', #{target}, '%')
            </if>
        </where>
    </select>

    <select id="getArticleById" resultMap="articleMapper" parameterType="java.lang.String">
        SELECT *
        FROM Articles
        WHERE articleId = #{articleId}
    </select>

    <insert id="createArticle" parameterType="com.tencent.wxcloudrun.model.Article">
        INSERT INTO `Articles`(`articleId`, `title`, `article_type`, `merchant_category`, `content`, `price`, `is_delivery_covered`, `delivery_method`, `location`, `is_need_help`, `create_timestamp`, `update_timestamp`, `author_name`, `latitude`, `longitude`, `like_count`,`view_count`, `col_count`, `is_stick_top`, `images`)
            VALUE(#{articleId}, #{title}, #{articleType}, #{merchantCategory}, #{content}, #{price}, #{isDeliveryCovered}, #{deliveryMethod}, #{location}, #{isNeedHelp}, #{createTimestamp}, #{updateTimestamp}, #{authorName}, #{authorId}, #{latitude}, #{longitude}, #{likeCount}, #{viewCount}, #{colCount}, #{isStickTop}, #{images})
    </insert>

</mapper>
